/*!

=========================================================
* Now UI Kit PRO React - v1.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/now-ui-kit-pro-react
* Copyright 2019 Creative Tim (http://www.creative-tim.com)

* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

*/
(this["webpackJsonpmaterial-kit-pro-react"]=this["webpackJsonpmaterial-kit-pro-react"]||[]).push([[18],{322:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return p}));var n=a(1),c=a.n(n),r=a(195),i=a(235),o=a.n(i),s=a(323),u=a.n(s),l=a(324),f=a.n(l),m={fontSize:"0.7rem"},v=function(e){var t=new Date(e),a=b(t.getHours()),n=b(t.getMinutes()),c=Date.now(),r=parseInt(c-e,10)/1e3/60,i=r/60;return r<=60?"".concat(a,":").concat(n):r>60&&i<=24||i>24?"".concat(a,":").concat(n," ----- ").concat(t.toDateString()):r},b=function(e){var t=e.toString();return 1===t.length?"0".concat(t):t},p=function(e){return e===r.b?u.a:e===r.a?f.a:o.a},O=function(e){return e.user===r.b?c.a.createElement("span",{style:m},"Karen ",c.a.createElement("small",null,"\xb7 ",v(e.createOn)," ")):e.user===r.a?c.a.createElement("span",{style:m},"Kevin ",c.a.createElement("small",null,"\xb7 ",v(e.createOn))):c.a.createElement(c.a.Fragment,null)}},323:function(e,t,a){e.exports=a.p+"static/media/gloria2.666943cf.jpg"},324:function(e,t,a){e.exports=a.p+"static/media/jerry.2aa27bf0.jpg"},829:function(e,t,a){"use strict";a.r(t);var n=a(57),c=a(111),r=a.n(c),i=a(1),o=a.n(i),s=a(38),u=a(10),l=a(28),f=a(107),m=a(67),v=a(68),b=a(325),p=a(321),O=a(322),d=a(73),g=a(220),j=a(72),E=a(77),h=Object(f.a)(g.a);t.default=Object(u.f)((function(e){e.history;var t=h(),a=Object(s.useSelector)((function(e){return e.login})).user,c=Object(i.useState)(void 0),u=Object(n.a)(c,2),f=u[0],g=u[1],y=Object(i.useState)(""),w=Object(n.a)(y,2),S=w[0],k=w[1],x=Object(i.useState)(""),D=Object(n.a)(x,2),I=D[0],U=D[1],M=Object(s.useSelector)((function(e){return e.chat})).maxMessageNumber;Object(i.useEffect)((function(){l.b&&void 0!==M&&l.b.limitToLast(M).on("value",(function(e){J(e)}))}),[M]),Object(i.useEffect)((function(){if(a&&I&&""!==I){var e={user:a,message:"".concat(I),createOn:Date.now()};l.b.push().set(e)}}),[I]);var J=function(e){var t=e.val();if(null!==t&&void 0!==t){var n=r.a.slice(r.a.values(t),-M);n.forEach((function(e){var a=r.a.pickBy(t,(function(t,a){return t.createOn===e.createOn}));if(a){var n=Object.keys(a)[0];e.id=n}}));var c=r.a.slice(r.a.values(n),-1)[0].user;r.a.slice(r.a.values(n),-1)[0].createOn;a===c?(k(""),g(n)):g(n)}},K=function(e,t){try{if(e)window.confirm("\u662f\u5426\u522a\u9664?")&&l.c.ref("chatMsg/".concat(e)).remove(),t&&clearInterval(t);else console.log("msgId not exist")}catch(a){console.log(a)}};return o.a.createElement("div",{className:t.section},o.a.createElement(m.a,{justify:"center"},o.a.createElement(v.a,{xs:12,sm:8,md:8},o.a.createElement("div",null,f?f.map((function(e,t){return o.a.createElement(b.a,{key:void 0!==e.id?e.id:t,avatar:Object(O.a)(e.user),title:Object(O.b)(e),message:e.message,id:e.id,event:K})})):o.a.createElement("div",null),o.a.createElement(p.a,{avatar:Object(O.a)(a),value:S,onChange:function(e){k(e.target.value)},onReply:function(e){if(a&&""!==S){var t={user:a,message:S,createOn:Date.now()};l.b.push().set(t)}},onUpdate:function(e){if(a){var t=M+1;Object(j.a)(E.a,t)}},enableUpdate:!0,setReplyImageUrl:U,enableImageUpload:!0})))),o.a.createElement(d.a,null))}))}}]);
//# sourceMappingURL=18.2f44911d.chunk.js.map